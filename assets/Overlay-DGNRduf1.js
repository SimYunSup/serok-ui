const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./sp-overlay-Cg7RdLQN.js","./index-CaKc-WKx.js","./jsx-runtime-D_zvdyIk.js","./index-zjYikpXF.css","./sp-icon-alert-B-pOl4ZL.js","./iframe-CLyNyPU0.js","./first-focusable-in-DWWytcdG.js","./Select.stories-CkYYWTRI.js","./index-D_Ss_HUe.js","./index-D4lIrffr.js","./PendingState-vrqgt4CX.js","./spectrum-icon-checkmark.css-AXB_nNOg.js","./focusable-CFblcWkW.js","./Select-B-XUZLsP.css","./condition-attribute-with-id--JNfyaCG.js"])))=>i.map(i=>d[i]);
import{r as kt}from"./sp-icon-alert-B-pOl4ZL.js";import{_ as Pt}from"./iframe-CLyNyPU0.js";import{a as ve,S as ye,i as we,x as ht,o as xt,n as D,e as Kt,r as be}from"./index-CaKc-WKx.js";import{u as Ft,f as _t,a as Nt}from"./first-focusable-in-DWWytcdG.js";import{i as Ee,a as xe,b as Yt,S as Ce,r as Oe,o as Xt}from"./Select.stories-CkYYWTRI.js";import{c as Tt}from"./condition-attribute-with-id--JNfyaCG.js";import"./jsx-runtime-D_zvdyIk.js";import"./index-D_Ss_HUe.js";import"./index-D4lIrffr.js";import"./PendingState-vrqgt4CX.js";import"./spectrum-icon-checkmark.css-AXB_nNOg.js";import"./focusable-CFblcWkW.js";/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function Pe(e){return(t,n)=>{const{slot:i,selector:s}=e??{},r="slot"+(i?`[name=${i}]`:":not([name])");return ve(t,n,{get(){var l;const o=(l=this.renderRoot)==null?void 0:l.querySelector(r),a=(o==null?void 0:o.assignedElements(e))??[];return s===void 0?a:a.filter(c=>c.matches(s))}})}}function Te(e,t,n=[]){for(let i=0;i<t.length;++i){const s=t[i],r=e[i],o=r.parentElement||r.getRootNode();n[i]&&n[i](s),o&&o!==r&&o.replaceChild(s,r),delete e[i]}return t}const Ae=(e,t,{position:n,prepareCallback:i}={position:"beforeend"})=>{let{length:s}=e;if(s===0)return()=>e;let r=1,o=0;(n==="afterbegin"||n==="afterend")&&(r=-1,o=s-1);const a=new Array(s),l=new Array(s),c=document.createComment("placeholder for reparented element");do{const h=e[o];i&&(l[o]=i(h)),a[o]=c.cloneNode();const d=h.parentElement||h.getRootNode();d&&d!==h&&d.replaceChild(a[o],h),t.insertAdjacentElement(n,h),o+=r}while(--s>0);return function(){return Te(a,e,l)}},se=Symbol("element resolver updated");class Se{constructor(t,{selector:n}={selector:""}){this._element=null,this._selector="",this.mutationCallback=i=>{let s=!1;i.forEach(r=>{if(!s){if(r.type==="childList"){const o=this.element&&[...r.removedNodes].includes(this.element),a=!!this.selector&&[...r.addedNodes].some(this.elementIsSelected);s=s||o||a}if(r.type==="attributes"){const o=r.target===this.element,a=!!this.selector&&this.elementIsSelected(r.target);s=s||o||a}}}),s&&this.resolveElement()},this.elementIsSelected=i=>{var s;return this.selectorIsId?(i==null?void 0:i.id)===this.selectorAsId:(s=i==null?void 0:i.matches)==null?void 0:s.call(i,this.selector)},this.host=t,this.selector=n,this.observer=new MutationObserver(this.mutationCallback),this.host.addController(this)}get element(){return this._element}set element(t){if(t===this.element)return;const n=this.element;this._element=t,this.host.requestUpdate(se,n)}get selector(){return this._selector}set selector(t){t!==this.selector&&(this.releaseElement(),this._selector=t,this.resolveElement())}get selectorAsId(){return this.selector.slice(1)}get selectorIsId(){return!!this.selector&&this.selector.startsWith("#")}hostConnected(){this.resolveElement(),this.observer.observe(this.host.getRootNode(),{subtree:!0,childList:!0,attributes:!0})}hostDisconnected(){this.releaseElement(),this.observer.disconnect()}resolveElement(){if(!this.selector){this.releaseElement();return}const t=this.host.getRootNode();this.element=this.selectorIsId?t.getElementById(this.selectorAsId):t.querySelector(this.selector)}releaseElement(){this.element=null}}class Re{constructor(t={}){this.warmUpDelay=1e3,this.coolDownDelay=1e3,this.isWarm=!1,this.timeout=0,Object.assign(this,t)}async openTimer(t){if(this.cancelCooldownTimer(),!this.component||t!==this.component)return this.component&&(this.close(this.component),this.cancelCooldownTimer()),this.component=t,this.isWarm?!1:(this.promise=new Promise(n=>{this.resolve=n,this.timeout=window.setTimeout(()=>{this.resolve&&(this.resolve(!1),this.isWarm=!0)},this.warmUpDelay)}),this.promise);if(this.promise)return this.promise;throw new Error("Inconsistent state")}close(t){this.component&&this.component===t&&(this.resetCooldownTimer(),this.timeout>0&&(clearTimeout(this.timeout),this.timeout=0),this.resolve&&(this.resolve(!0),delete this.resolve),delete this.promise,delete this.component)}resetCooldownTimer(){this.isWarm&&(this.cooldownTimeout&&window.clearTimeout(this.cooldownTimeout),this.cooldownTimeout=window.setTimeout(()=>{this.isWarm=!1,delete this.cooldownTimeout},this.coolDownDelay))}cancelCooldownTimer(){this.cooldownTimeout&&window.clearTimeout(this.cooldownTimeout),delete this.cooldownTimeout}}const ft=new Re,G=()=>{},$t=(e,t,n)=>{const i=new AbortController,s=new Map,r=()=>{i.abort(),n()};let o,a;const l=requestAnimationFrame(()=>{o=requestAnimationFrame(()=>{a=requestAnimationFrame(()=>{r()})})}),c=d=>{d.target===e&&(s.set(d.propertyName,s.get(d.propertyName)-1),s.get(d.propertyName)||s.delete(d.propertyName),s.size===0&&r())},h=d=>{d.target===e&&(s.has(d.propertyName)||s.set(d.propertyName,0),s.set(d.propertyName,s.get(d.propertyName)+1),cancelAnimationFrame(l),cancelAnimationFrame(o),cancelAnimationFrame(a))};e.addEventListener("transitionrun",h,{signal:i.signal}),e.addEventListener("transitionend",c,{signal:i.signal}),e.addEventListener("transitioncancel",c,{signal:i.signal}),t()};function S(){return new Promise(e=>requestAnimationFrame(()=>e()))}class rt extends ye{constructor(){super(...arguments),this.dispose=G,this.offset=0,this.willPreventClose=!1}async applyFocus(t,n){}get delayed(){return!1}set delayed(t){}get disabled(){return!1}set disabled(t){}get elementResolver(){return this._elementResolver}set elementResolver(t){this._elementResolver=t}async ensureOnDOM(t){}async makeTransition(t){return null}async manageDelay(t){}async manageDialogOpen(){}async managePopoverOpen(){}managePosition(){}get open(){return!1}set open(t){}get placementController(){return this._placementController}set placementController(t){this._placementController=t}requestSlottable(){}returnFocus(){}get state(){return"closed"}set state(t){}manuallyKeepOpen(){}static update(){const t=new CustomEvent("sp-update-overlays",{bubbles:!0,composed:!0,cancelable:!0});document.dispatchEvent(t)}static async open(t,n,i,s){await Pt(()=>import("./sp-overlay-Cg7RdLQN.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]),import.meta.url);const r=arguments.length===2,o=i||t,a=new this;let l=!1;a.dispose=()=>{a.addEventListener("sp-closed",()=>{l||(c(),l=!0),requestAnimationFrame(()=>{a.remove()})}),a.open=!1,a.dispose=G};const c=Ae([o],a,{position:"beforeend",prepareCallback:d=>{const u=d.slot;return d.removeAttribute("slot"),()=>{d.slot=u}}});if(!r&&o&&s){const d=t,u=n,p=s;return rt.applyOptions(a,{...p,delayed:p.delayed||o.hasAttribute("delayed"),trigger:p.virtualTrigger||d,type:u==="modal"?"modal":u==="hover"?"hint":"auto"}),d.insertAdjacentElement("afterend",a),await a.updateComplete,a.open=!0,a.dispose}const h=n;return a.append(o),rt.applyOptions(a,{...h,delayed:h.delayed||o.hasAttribute("delayed")}),a.updateComplete.then(()=>{a.open=!0}),a}static applyOptions(t,n){var i,s;t.delayed=!!n.delayed,t.receivesFocus=(i=n.receivesFocus)!=null?i:"auto",t.triggerElement=n.trigger||null,t.type=n.type||"modal",t.offset=(s=n.offset)!=null?s:0,t.placement=n.placement,t.willPreventClose=!!n.notImmediatelyClosable}disconnectedCallback(){super.disconnectedCallback()}}class yt{constructor(t,n){this.x=0,this.y=0,this.x=t,this.y=n}updateBoundingClientRect(t,n){this.x=t,this.y=n,rt.update()}getBoundingClientRect(){return{width:0,height:0,top:this.y,right:this.x,y:this.y,x:this.x,bottom:this.y,left:this.x,toJSON(){}}}}class It extends Event{constructor(){super("beforetoggle",{bubbles:!1,composed:!1}),this.currentState="open",this.newState="closed"}}class Mt extends Event{constructor(){super("beforetoggle",{bubbles:!1,composed:!1}),this.currentState="closed",this.newState="open"}}class k extends Event{constructor(t,n,{publish:i,interaction:s,reason:r}){super(t,{bubbles:i,composed:i}),this.overlay=n,this.detail={interaction:s,reason:r}}}function Le(e){class t extends e{async manageDialogOpen(){const i=this.open;if(await S(),await this.managePosition(),this.open!==i)return;const s=await this.dialogMakeTransition(i);this.open===i&&await this.dialogApplyFocus(i,s)}async dialogMakeTransition(i){let s=null;const r=(a,l)=>async()=>{if(a.open=i,!i){const h=()=>{a.removeEventListener("close",h)};a.addEventListener("close",h)}if(l>0)return;const c=i?Mt:It;this.dispatchEvent(new c),i&&(a.matches(Ft)&&(s=a),s=s||_t(a),s||a.querySelectorAll("slot").forEach(h=>{s||(s=Nt(h))}),!(!this.isConnected||this.dialogEl.open)&&this.dialogEl.showModal())},o=(a,l)=>()=>{if(this.open!==i)return;const c=i?"sp-opened":"sp-closed";if(l>0){a.dispatchEvent(new k(c,this,{interaction:this.type,publish:!1}));return}if(!this.isConnected||i!==this.open)return;const h=async()=>{const d=this.triggerElement instanceof yt;this.dispatchEvent(new k(c,this,{interaction:this.type,publish:d})),a.dispatchEvent(new k(c,this,{interaction:this.type,publish:!1})),this.triggerElement&&!d&&this.triggerElement.dispatchEvent(new k(c,this,{interaction:this.type,publish:!0})),this.state=i?"opened":"closed",this.returnFocus(),await S(),await S(),i===this.open&&i===!1&&this.requestSlottable()};!i&&this.dialogEl.open?(this.dialogEl.addEventListener("close",()=>{h()},{once:!0}),this.dialogEl.close()):h()};return this.elements.forEach((a,l)=>{$t(a,r(a,l),o(a,l))}),s}async dialogApplyFocus(i,s){this.applyFocus(i,s)}}return t}const De=CSS.supports("(overlay: auto)");function Gt(e){let t=!1;try{t=e.matches(":popover-open")}catch{}let n=!1;try{n=e.matches(":open")}catch{}return t||n}function ke(e){class t extends e{async manageDelay(i){if(i===!1||i!==this.open){ft.close(this);return}this.delayed&&await ft.openTimer(this)&&(this.open=!i)}async shouldHidePopover(i){if(i&&this.open!==i)return;const s=async({newState:r}={})=>{r!=="open"&&await this.placementController.resetOverlayPosition()};if(!Gt(this.dialogEl)){s();return}this.dialogEl.addEventListener("toggle",s,{once:!0})}shouldShowPopover(i){let s=!1;try{s=this.dialogEl.matches(":popover-open")}catch{}let r=!1;try{r=this.dialogEl.matches(":open")}catch{}i&&this.open===i&&!s&&!r&&this.isConnected&&(this.dialogEl.showPopover(),this.managePosition())}async ensureOnDOM(i){await S(),De||await this.shouldHidePopover(i),this.shouldShowPopover(i),await S()}async makeTransition(i){if(this.open!==i)return null;let s=null;const r=(a,l)=>()=>{if(a.open=i,l===0){const c=i?Mt:It;this.dispatchEvent(new c)}!i||(a.matches(Ft)&&(s=a),s=s||_t(a),s)||a.querySelectorAll("slot").forEach(c=>{s||(s=Nt(c))})},o=(a,l)=>async()=>{if(this.open!==i)return;const c=i?"sp-opened":"sp-closed";if(l>0){a.dispatchEvent(new k(c,this,{interaction:this.type,publish:!1}));return}const h=async()=>{if(this.open!==i)return;await S();const u=this.triggerElement instanceof yt;this.dispatchEvent(new k(c,this,{interaction:this.type,publish:u})),a.dispatchEvent(new k(c,this,{interaction:this.type,publish:!1})),this.triggerElement&&!u&&this.triggerElement.dispatchEvent(new k(c,this,{interaction:this.type,publish:!0})),this.state=i?"opened":"closed",this.returnFocus(),await S(),await S(),i===this.open&&i===!1&&this.requestSlottable()};if(this.open!==i)return;const d=Gt(this.dialogEl);i!==!0&&d&&this.isConnected?(this.dialogEl.addEventListener("beforetoggle",()=>{h()},{once:!0}),this.dialogEl.hidePopover()):h()};return this.elements.forEach((a,l)=>{$t(a,r(a,l),o(a,l))}),s}}return t}function Fe(e){class t extends e{async managePopoverOpen(){await this.managePosition()}async manageDelay(i){if(i===!1||i!==this.open){ft.close(this);return}this.delayed&&await ft.openTimer(this)&&(this.open=!i)}async ensureOnDOM(i){document.body.offsetHeight}async makeTransition(i){if(this.open!==i)return null;let s=null;const r=(a,l)=>()=>{if(i===this.open){if(a.open=i,l===0){const c=i?Mt:It;this.dispatchEvent(new c)}i!==!0||(a.matches(Ft)&&(s=a),s=s||_t(a),s)||a.querySelectorAll("slot").forEach(c=>{s||(s=Nt(c))})}},o=(a,l)=>async()=>{if(this.open!==i)return;const c=i?"sp-opened":"sp-closed";if(a.dispatchEvent(new k(c,this,{interaction:this.type})),l>0)return;const h=this.triggerElement instanceof yt;this.dispatchEvent(new k(c,this,{interaction:this.type,publish:h})),this.triggerElement&&!h&&this.triggerElement.dispatchEvent(new k(c,this,{interaction:this.type,publish:!0})),this.state=i?"opened":"closed",this.returnFocus(),await S(),await S(),i===this.open&&i===!1&&this.requestSlottable()};return this.elements.forEach((a,l)=>{$t(a,r(a,l),o(a,l))}),s}}return t}const _e="showPopover"in document.createElement("div");let Ne=class{constructor(){this.root=document.body,this.stack=[],this.handlePointerdown=t=>{this.pointerdownPath=t.composedPath(),this.lastOverlay=this.stack[this.stack.length-1]},this.handlePointerup=()=>{const t=this.pointerdownPath;if(this.pointerdownPath=void 0,!this.stack.length||!(t!=null&&t.length))return;const n=this.lastOverlay;this.lastOverlay=void 0;const i=this.stack.length-1,s=this.stack.filter((r,o)=>!t.find(a=>a===r||a===(r==null?void 0:r.triggerElement)&&(r==null?void 0:r.type)==="hint"||o===i&&r!==n&&r.triggerInteraction==="longpress")&&!r.shouldPreventClose()&&r.type!=="manual"&&!(r.type==="modal"&&n!==r));s.reverse(),s.forEach(r=>{this.closeOverlay(r);let o=r.parentOverlayToForceClose;for(;o;)this.closeOverlay(o),o=o.parentOverlayToForceClose})},this.handleBeforetoggle=t=>{const{target:n,newState:i}=t;i!=="open"&&this.closeOverlay(n)},this.handleKeydown=t=>{if(t.code!=="Escape"||!this.stack.length)return;const n=this.stack[this.stack.length-1];if((n==null?void 0:n.type)==="page"){t.preventDefault();return}if((n==null?void 0:n.type)==="manual"){this.closeOverlay(n);return}_e||n&&this.closeOverlay(n)},this.bindEvents()}get document(){return this.root.ownerDocument||document}bindEvents(){this.document.addEventListener("pointerdown",this.handlePointerdown),this.document.addEventListener("pointerup",this.handlePointerup),this.document.addEventListener("keydown",this.handleKeydown)}closeOverlay(t){const n=this.stack.indexOf(t);n>-1&&this.stack.splice(n,1),t.open=!1}overlaysByTriggerElement(t){return this.stack.filter(n=>n.triggerElement===t)}add(t){if(this.stack.includes(t)){const n=this.stack.indexOf(t);n>-1&&(this.stack.splice(n,1),this.stack.push(t));return}if(t.type==="auto"||t.type==="modal"||t.type==="page"){const n="sp-overlay-query-path",i=new Event(n,{composed:!0,bubbles:!0});t.addEventListener(n,s=>{const r=s.composedPath();this.stack.forEach(o=>{!r.find(a=>a===o)&&o.type!=="manual"&&o.type!=="modal"&&this.closeOverlay(o)})},{once:!0}),t.dispatchEvent(i)}else if(t.type==="hint"){if(this.stack.some(n=>n.type!=="manual"&&n.triggerElement&&n.triggerElement===t.triggerElement)){t.open=!1;return}this.stack.forEach(n=>{n.type==="hint"&&this.closeOverlay(n)})}requestAnimationFrame(()=>{this.stack.push(t),t.addEventListener("beforetoggle",this.handleBeforetoggle,{once:!0})})}remove(t){this.closeOverlay(t)}};const Jt=new Ne,K=Math.min,T=Math.max,mt=Math.round,dt=Math.floor,M=e=>({x:e,y:e}),$e={left:"right",right:"left",bottom:"top",top:"bottom"},Ie={start:"end",end:"start"};function At(e,t,n){return T(e,K(t,n))}function nt(e,t){return typeof e=="function"?e(t):e}function Y(e){return e.split("-")[0]}function it(e){return e.split("-")[1]}function oe(e){return e==="x"?"y":"x"}function Bt(e){return e==="y"?"height":"width"}function J(e){return["top","bottom"].includes(Y(e))?"y":"x"}function Wt(e){return oe(J(e))}function Me(e,t,n){n===void 0&&(n=!1);const i=it(e),s=Wt(e),r=Bt(s);let o=s==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[r]>t.floating[r]&&(o=gt(o)),[o,gt(o)]}function Be(e){const t=gt(e);return[St(e),t,St(t)]}function St(e){return e.replace(/start|end/g,t=>Ie[t])}function We(e,t,n){const i=["left","right"],s=["right","left"],r=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?s:i:t?i:s;case"left":case"right":return t?r:o;default:return[]}}function qe(e,t,n,i){const s=it(e);let r=We(Y(e),n==="start",i);return s&&(r=r.map(o=>o+"-"+s),t&&(r=r.concat(r.map(St)))),r}function gt(e){return e.replace(/left|right|bottom|top/g,t=>$e[t])}function He(e){return{top:0,right:0,bottom:0,left:0,...e}}function re(e){return typeof e!="number"?He(e):{top:e,right:e,bottom:e,left:e}}function vt(e){const{x:t,y:n,width:i,height:s}=e;return{width:i,height:s,top:n,left:t,right:t+i,bottom:n+s,x:t,y:n}}function Qt(e,t,n){let{reference:i,floating:s}=e;const r=J(t),o=Wt(t),a=Bt(o),l=Y(t),c=r==="y",h=i.x+i.width/2-s.width/2,d=i.y+i.height/2-s.height/2,u=i[a]/2-s[a]/2;let p;switch(l){case"top":p={x:h,y:i.y-s.height};break;case"bottom":p={x:h,y:i.y+i.height};break;case"right":p={x:i.x+i.width,y:d};break;case"left":p={x:i.x-s.width,y:d};break;default:p={x:i.x,y:i.y}}switch(it(t)){case"start":p[o]-=u*(n&&c?-1:1);break;case"end":p[o]+=u*(n&&c?-1:1);break}return p}const Ve=async(e,t,n)=>{const{placement:i="bottom",strategy:s="absolute",middleware:r=[],platform:o}=n,a=r.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:h,y:d}=Qt(c,i,l),u=i,p={},f=0;for(let m=0;m<a.length;m++){const{name:v,fn:g}=a[m],{x:y,y:w,data:E,reset:b}=await g({x:h,y:d,initialPlacement:i,placement:u,strategy:s,middlewareData:p,rects:c,platform:o,elements:{reference:e,floating:t}});h=y??h,d=w??d,p={...p,[v]:{...p[v],...E}},b&&f<=50&&(f++,typeof b=="object"&&(b.placement&&(u=b.placement),b.rects&&(c=b.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):b.rects),{x:h,y:d}=Qt(c,u,l)),m=-1)}return{x:h,y:d,placement:u,strategy:s,middlewareData:p}};async function qt(e,t){var n;t===void 0&&(t={});const{x:i,y:s,platform:r,rects:o,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:h="viewport",elementContext:d="floating",altBoundary:u=!1,padding:p=0}=nt(t,e),f=re(p),v=a[u?d==="floating"?"reference":"floating":d],g=vt(await r.getClippingRect({element:(n=await(r.isElement==null?void 0:r.isElement(v)))==null||n?v:v.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(a.floating)),boundary:c,rootBoundary:h,strategy:l})),y=d==="floating"?{x:i,y:s,width:o.floating.width,height:o.floating.height}:o.reference,w=await(r.getOffsetParent==null?void 0:r.getOffsetParent(a.floating)),E=await(r.isElement==null?void 0:r.isElement(w))?await(r.getScale==null?void 0:r.getScale(w))||{x:1,y:1}:{x:1,y:1},b=vt(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:w,strategy:l}):y);return{top:(g.top-b.top+f.top)/E.y,bottom:(b.bottom-g.bottom+f.bottom)/E.y,left:(g.left-b.left+f.left)/E.x,right:(b.right-g.right+f.right)/E.x}}const ze=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:i,placement:s,rects:r,platform:o,elements:a,middlewareData:l}=t,{element:c,padding:h=0}=nt(e,t)||{};if(c==null)return{};const d=re(h),u={x:n,y:i},p=Wt(s),f=Bt(p),m=await o.getDimensions(c),v=p==="y",g=v?"top":"left",y=v?"bottom":"right",w=v?"clientHeight":"clientWidth",E=r.reference[f]+r.reference[p]-u[p]-r.floating[f],b=u[p]-r.reference[p],R=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let C=R?R[w]:0;(!C||!await(o.isElement==null?void 0:o.isElement(R)))&&(C=a.floating[w]||r.floating[f]);const q=E/2-b/2,N=C/2-m[f]/2-1,L=K(d[g],N),V=K(d[y],N),$=L,z=C-m[f]-V,O=C/2-m[f]/2+q,Z=At($,O,z),H=!l.arrow&&it(s)!=null&&O!==Z&&r.reference[f]/2-(O<$?L:V)-m[f]/2<0,I=H?O<$?O-$:O-z:0;return{[p]:u[p]+I,data:{[p]:Z,centerOffset:O-Z-I,...H&&{alignmentOffset:I}},reset:H}}}),Ue=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,i;const{placement:s,middlewareData:r,rects:o,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:h=!0,crossAxis:d=!0,fallbackPlacements:u,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:m=!0,...v}=nt(e,t);if((n=r.arrow)!=null&&n.alignmentOffset)return{};const g=Y(s),y=J(a),w=Y(a)===a,E=await(l.isRTL==null?void 0:l.isRTL(c.floating)),b=u||(w||!m?[gt(a)]:Be(a)),R=f!=="none";!u&&R&&b.push(...qe(a,m,f,E));const C=[a,...b],q=await qt(t,v),N=[];let L=((i=r.flip)==null?void 0:i.overflows)||[];if(h&&N.push(q[g]),d){const O=Me(s,o,E);N.push(q[O[0]],q[O[1]])}if(L=[...L,{placement:s,overflows:N}],!N.every(O=>O<=0)){var V,$;const O=(((V=r.flip)==null?void 0:V.index)||0)+1,Z=C[O];if(Z)return{data:{index:O,overflows:L},reset:{placement:Z}};let H=($=L.filter(I=>I.overflows[0]<=0).sort((I,U)=>I.overflows[1]-U.overflows[1])[0])==null?void 0:$.placement;if(!H)switch(p){case"bestFit":{var z;const I=(z=L.filter(U=>{if(R){const j=J(U.placement);return j===y||j==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(j=>j>0).reduce((j,ge)=>j+ge,0)]).sort((U,j)=>U[1]-j[1])[0])==null?void 0:z[0];I&&(H=I);break}case"initialPlacement":H=a;break}if(s!==H)return{reset:{placement:H}}}return{}}}};async function je(e,t){const{placement:n,platform:i,elements:s}=e,r=await(i.isRTL==null?void 0:i.isRTL(s.floating)),o=Y(n),a=it(n),l=J(n)==="y",c=["left","top"].includes(o)?-1:1,h=r&&l?-1:1,d=nt(t,e);let{mainAxis:u,crossAxis:p,alignmentAxis:f}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof f=="number"&&(p=a==="end"?f*-1:f),l?{x:p*h,y:u*c}:{x:u*c,y:p*h}}const Ke=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,i;const{x:s,y:r,placement:o,middlewareData:a}=t,l=await je(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(i=a.arrow)!=null&&i.alignmentOffset?{}:{x:s+l.x,y:r+l.y,data:{...l,placement:o}}}}},Ye=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:i,placement:s}=t,{mainAxis:r=!0,crossAxis:o=!1,limiter:a={fn:v=>{let{x:g,y}=v;return{x:g,y}}},...l}=nt(e,t),c={x:n,y:i},h=await qt(t,l),d=J(Y(s)),u=oe(d);let p=c[u],f=c[d];if(r){const v=u==="y"?"top":"left",g=u==="y"?"bottom":"right",y=p+h[v],w=p-h[g];p=At(y,p,w)}if(o){const v=d==="y"?"top":"left",g=d==="y"?"bottom":"right",y=f+h[v],w=f-h[g];f=At(y,f,w)}const m=a.fn({...t,[u]:p,[d]:f});return{...m,data:{x:m.x-n,y:m.y-i,enabled:{[u]:r,[d]:o}}}}}},Xe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,i;const{placement:s,rects:r,platform:o,elements:a}=t,{apply:l=()=>{},...c}=nt(e,t),h=await qt(t,c),d=Y(s),u=it(s),p=J(s)==="y",{width:f,height:m}=r.floating;let v,g;d==="top"||d==="bottom"?(v=d,g=u===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(g=d,v=u==="end"?"top":"bottom");const y=m-h.top-h.bottom,w=f-h.left-h.right,E=K(m-h[v],y),b=K(f-h[g],w),R=!t.middlewareData.shift;let C=E,q=b;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(q=w),(i=t.middlewareData.shift)!=null&&i.enabled.y&&(C=y),R&&!u){const L=T(h.left,0),V=T(h.right,0),$=T(h.top,0),z=T(h.bottom,0);p?q=f-2*(L!==0||V!==0?L+V:T(h.left,h.right)):C=m-2*($!==0||z!==0?$+z:T(h.top,h.bottom))}await l({...t,availableWidth:q,availableHeight:C});const N=await o.getDimensions(a.floating);return f!==N.width||m!==N.height?{reset:{rects:!0}}:{}}}};function wt(){return typeof window<"u"}function st(e){return ae(e)?(e.nodeName||"").toLowerCase():"#document"}function A(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function W(e){var t;return(t=(ae(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function ae(e){return wt()?e instanceof Node||e instanceof A(e).Node:!1}function F(e){return wt()?e instanceof Element||e instanceof A(e).Element:!1}function B(e){return wt()?e instanceof HTMLElement||e instanceof A(e).HTMLElement:!1}function Zt(e){return!wt()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof A(e).ShadowRoot}function ct(e){const{overflow:t,overflowX:n,overflowY:i,display:s}=_(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+n)&&!["inline","contents"].includes(s)}function Ge(e){return["table","td","th"].includes(st(e))}function bt(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Ht(e){const t=Vt(),n=F(e)?_(e):e;return["transform","translate","scale","rotate","perspective"].some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function Je(e){let t=X(e);for(;B(t)&&!et(t);){if(Ht(t))return t;if(bt(t))return null;t=X(t)}return null}function Vt(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function et(e){return["html","body","#document"].includes(st(e))}function _(e){return A(e).getComputedStyle(e)}function Et(e){return F(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function X(e){if(st(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Zt(e)&&e.host||W(e);return Zt(t)?t.host:t}function le(e){const t=X(e);return et(t)?e.ownerDocument?e.ownerDocument.body:e.body:B(t)&&ct(t)?t:le(t)}function at(e,t,n){var i;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=le(e),r=s===((i=e.ownerDocument)==null?void 0:i.body),o=A(s);if(r){const a=Rt(o);return t.concat(o,o.visualViewport||[],ct(s)?s:[],a&&n?at(a):[])}return t.concat(s,at(s,[],n))}function Rt(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function ce(e){const t=_(e);let n=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const s=B(e),r=s?e.offsetWidth:n,o=s?e.offsetHeight:i,a=mt(n)!==r||mt(i)!==o;return a&&(n=r,i=o),{width:n,height:i,$:a}}function zt(e){return F(e)?e:e.contextElement}function tt(e){const t=zt(e);if(!B(t))return M(1);const n=t.getBoundingClientRect(),{width:i,height:s,$:r}=ce(t);let o=(r?mt(n.width):n.width)/i,a=(r?mt(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Qe=M(0);function he(e){const t=A(e);return!Vt()||!t.visualViewport?Qe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Ze(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==A(e)?!1:t}function Q(e,t,n,i){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),r=zt(e);let o=M(1);t&&(i?F(i)&&(o=tt(i)):o=tt(e));const a=Ze(r,n,i)?he(r):M(0);let l=(s.left+a.x)/o.x,c=(s.top+a.y)/o.y,h=s.width/o.x,d=s.height/o.y;if(r){const u=A(r),p=i&&F(i)?A(i):i;let f=u,m=Rt(f);for(;m&&i&&p!==f;){const v=tt(m),g=m.getBoundingClientRect(),y=_(m),w=g.left+(m.clientLeft+parseFloat(y.paddingLeft))*v.x,E=g.top+(m.clientTop+parseFloat(y.paddingTop))*v.y;l*=v.x,c*=v.y,h*=v.x,d*=v.y,l+=w,c+=E,f=A(m),m=Rt(f)}}return vt({width:h,height:d,x:l,y:c})}function Ut(e,t){const n=Et(e).scrollLeft;return t?t.left+n:Q(W(e)).left+n}function de(e,t,n){n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=i.left+t.scrollLeft-(n?0:Ut(e,i)),r=i.top+t.scrollTop;return{x:s,y:r}}function tn(e){let{elements:t,rect:n,offsetParent:i,strategy:s}=e;const r=s==="fixed",o=W(i),a=t?bt(t.floating):!1;if(i===o||a&&r)return n;let l={scrollLeft:0,scrollTop:0},c=M(1);const h=M(0),d=B(i);if((d||!d&&!r)&&((st(i)!=="body"||ct(o))&&(l=Et(i)),B(i))){const p=Q(i);c=tt(i),h.x=p.x+i.clientLeft,h.y=p.y+i.clientTop}const u=o&&!d&&!r?de(o,l,!0):M(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+h.x+u.x,y:n.y*c.y-l.scrollTop*c.y+h.y+u.y}}function en(e){return Array.from(e.getClientRects())}function nn(e){const t=W(e),n=Et(e),i=e.ownerDocument.body,s=T(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),r=T(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let o=-n.scrollLeft+Ut(e);const a=-n.scrollTop;return _(i).direction==="rtl"&&(o+=T(t.clientWidth,i.clientWidth)-s),{width:s,height:r,x:o,y:a}}function sn(e,t){const n=A(e),i=W(e),s=n.visualViewport;let r=i.clientWidth,o=i.clientHeight,a=0,l=0;if(s){r=s.width,o=s.height;const c=Vt();(!c||c&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:r,height:o,x:a,y:l}}function on(e,t){const n=Q(e,!0,t==="fixed"),i=n.top+e.clientTop,s=n.left+e.clientLeft,r=B(e)?tt(e):M(1),o=e.clientWidth*r.x,a=e.clientHeight*r.y,l=s*r.x,c=i*r.y;return{width:o,height:a,x:l,y:c}}function te(e,t,n){let i;if(t==="viewport")i=sn(e,n);else if(t==="document")i=nn(W(e));else if(F(t))i=on(t,n);else{const s=he(e);i={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return vt(i)}function pe(e,t){const n=X(e);return n===t||!F(n)||et(n)?!1:_(n).position==="fixed"||pe(n,t)}function rn(e,t){const n=t.get(e);if(n)return n;let i=at(e,[],!1).filter(a=>F(a)&&st(a)!=="body"),s=null;const r=_(e).position==="fixed";let o=r?X(e):e;for(;F(o)&&!et(o);){const a=_(o),l=Ht(o);!l&&a.position==="fixed"&&(s=null),(r?!l&&!s:!l&&a.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||ct(o)&&!l&&pe(e,o))?i=i.filter(h=>h!==o):s=a,o=X(o)}return t.set(e,i),i}function an(e){let{element:t,boundary:n,rootBoundary:i,strategy:s}=e;const o=[...n==="clippingAncestors"?bt(t)?[]:rn(t,this._c):[].concat(n),i],a=o[0],l=o.reduce((c,h)=>{const d=te(t,h,s);return c.top=T(d.top,c.top),c.right=K(d.right,c.right),c.bottom=K(d.bottom,c.bottom),c.left=T(d.left,c.left),c},te(t,a,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function ln(e){const{width:t,height:n}=ce(e);return{width:t,height:n}}function cn(e,t,n){const i=B(t),s=W(t),r=n==="fixed",o=Q(e,!0,r,t);let a={scrollLeft:0,scrollTop:0};const l=M(0);if(i||!i&&!r)if((st(t)!=="body"||ct(s))&&(a=Et(t)),i){const u=Q(t,!0,r,t);l.x=u.x+t.clientLeft,l.y=u.y+t.clientTop}else s&&(l.x=Ut(s));const c=s&&!i&&!r?de(s,a):M(0),h=o.left+a.scrollLeft-l.x-c.x,d=o.top+a.scrollTop-l.y-c.y;return{x:h,y:d,width:o.width,height:o.height}}function Ct(e){return _(e).position==="static"}function ee(e,t){if(!B(e)||_(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return W(e)===n&&(n=n.ownerDocument.body),n}function ue(e,t){const n=A(e);if(bt(e))return n;if(!B(e)){let s=X(e);for(;s&&!et(s);){if(F(s)&&!Ct(s))return s;s=X(s)}return n}let i=ee(e,t);for(;i&&Ge(i)&&Ct(i);)i=ee(i,t);return i&&et(i)&&Ct(i)&&!Ht(i)?n:i||Je(e)||n}const hn=async function(e){const t=this.getOffsetParent||ue,n=this.getDimensions,i=await n(e.floating);return{reference:cn(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function dn(e){return _(e).direction==="rtl"}const pn={convertOffsetParentRelativeRectToViewportRelativeRect:tn,getDocumentElement:W,getClippingRect:an,getOffsetParent:ue,getElementRects:hn,getClientRects:en,getDimensions:ln,getScale:tt,isElement:F,isRTL:dn};function fe(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function un(e,t){let n=null,i;const s=W(e);function r(){var a;clearTimeout(i),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),r();const c=e.getBoundingClientRect(),{left:h,top:d,width:u,height:p}=c;if(a||t(),!u||!p)return;const f=dt(d),m=dt(s.clientWidth-(h+u)),v=dt(s.clientHeight-(d+p)),g=dt(h),w={rootMargin:-f+"px "+-m+"px "+-v+"px "+-g+"px",threshold:T(0,K(1,l))||1};let E=!0;function b(R){const C=R[0].intersectionRatio;if(C!==l){if(!E)return o();C?o(!1,C):i=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!fe(c,e.getBoundingClientRect())&&o(),E=!1}try{n=new IntersectionObserver(b,{...w,root:s.ownerDocument})}catch{n=new IntersectionObserver(b,w)}n.observe(e)}return o(!0),r}function ne(e,t,n,i){i===void 0&&(i={});const{ancestorScroll:s=!0,ancestorResize:r=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=zt(e),h=s||r?[...c?at(c):[],...at(t)]:[];h.forEach(g=>{s&&g.addEventListener("scroll",n,{passive:!0}),r&&g.addEventListener("resize",n)});const d=c&&a?un(c,n):null;let u=-1,p=null;o&&(p=new ResizeObserver(g=>{let[y]=g;y&&y.target===c&&p&&(p.unobserve(t),cancelAnimationFrame(u),u=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(t)})),n()}),c&&!l&&p.observe(c),p.observe(t));let f,m=l?Q(e):null;l&&v();function v(){const g=Q(e);m&&!fe(m,g)&&n(),m=g,f=requestAnimationFrame(v)}return n(),()=>{var g;h.forEach(y=>{s&&y.removeEventListener("scroll",n),r&&y.removeEventListener("resize",n)}),d==null||d(),(g=p)==null||g.disconnect(),p=null,l&&cancelAnimationFrame(f)}}const fn=Ke,mn=Ye,ie=Ue,gn=Xe,vn=ze,yn=(e,t,n)=>{const i=new Map,s={platform:pn,...n},r={...s.platform,_c:i};return Ve(e,t,{...s,platform:r})};function pt(e){if(typeof e>"u")return 0;const t=window.devicePixelRatio||1;return Math.round(e*t)/t}const ut=8,wn=100,bn=e=>{var t;return(t={left:["right","bottom","top"],"left-start":["right-start","bottom","top"],"left-end":["right-end","bottom","top"],right:["left","bottom","top"],"right-start":["left-start","bottom","top"],"right-end":["left-end","bottom","top"],top:["bottom","left","right"],"top-start":["bottom-start","left","right"],"top-end":["bottom-end","left","right"],bottom:["top","left","right"],"bottom-start":["top-start","left","right"],"bottom-end":["top-end","left","right"]}[e])!=null?t:[e]};class En{constructor(t){this.originalPlacements=new WeakMap,this.allowPlacementUpdate=!1,this.closeForAncestorUpdate=()=>{!this.allowPlacementUpdate&&this.options.type!=="modal"&&this.cleanup&&this.target.dispatchEvent(new Event("close",{bubbles:!0})),this.allowPlacementUpdate=!1},this.updatePlacement=()=>{this.computePlacement()},this.resetOverlayPosition=()=>{!this.target||!this.options||(this.clearOverlayPosition(),this.host.offsetHeight,this.computePlacement())},this.host=t,this.host.addController(this)}async placeOverlay(t=this.target,n=this.options){if(this.target=t,this.options=n,!t||!n)return;const i=ne(n.trigger,t,this.closeForAncestorUpdate,{ancestorResize:!1,elementResize:!1,layoutShift:!1}),s=ne(n.trigger,t,this.updatePlacement,{ancestorScroll:!1});this.cleanup=()=>{var r;(r=this.host.elements)==null||r.forEach(o=>{o.addEventListener("sp-closed",()=>{const a=this.originalPlacements.get(o);a&&o.setAttribute("placement",a),this.originalPlacements.delete(o)},{once:!0})}),i(),s()}}async computePlacement(){var t,n;const{options:i,target:s}=this;await(document.fonts?document.fonts.ready:Promise.resolve());const r=i.trigger instanceof HTMLElement?ie():ie({padding:ut,fallbackPlacements:bn(i.placement)}),[o=0,a=0]=Array.isArray(i==null?void 0:i.offset)?i.offset:[i.offset,0],l=(t=this.host.elements.find(f=>f.tipElement))==null?void 0:t.tipElement,c=[fn({mainAxis:o,crossAxis:a}),mn({padding:ut}),r,gn({padding:ut,apply:({availableWidth:f,availableHeight:m,rects:{floating:v}})=>{const g=Math.max(wn,Math.floor(m)),y=v.height;this.initialHeight=this.isConstrained&&this.initialHeight||y,this.isConstrained=y<this.initialHeight||g<=y;const w=this.isConstrained?`${g}px`:"";Object.assign(s.style,{maxWidth:`${Math.floor(f)}px`,maxHeight:w})}}),...l?[vn({element:l,padding:i.tipPadding||ut})]:[]],{x:h,y:d,placement:u,middlewareData:p}=await yn(i.trigger,s,{placement:i.placement,middleware:c,strategy:"fixed"});if(Object.assign(s.style,{top:"0px",left:"0px",translate:`${pt(h)}px ${pt(d)}px`}),s.setAttribute("actual-placement",u),(n=this.host.elements)==null||n.forEach(f=>{this.originalPlacements.has(f)||this.originalPlacements.set(f,f.getAttribute("placement")),f.setAttribute("placement",u)}),l&&p.arrow){const{x:f,y:m}=p.arrow;Object.assign(l.style,{top:u.startsWith("right")||u.startsWith("left")?"0px":"",left:u.startsWith("bottom")||u.startsWith("top")?"0px":"",translate:`${pt(f)}px ${pt(m)}px`})}}clearOverlayPosition(){this.target&&(this.target.style.removeProperty("max-height"),this.target.style.removeProperty("max-width"),this.initialHeight=void 0,this.isConstrained=!1)}hostConnected(){document.addEventListener("sp-update-overlays",this.resetOverlayPosition)}hostUpdated(){var t;this.host.open||((t=this.cleanup)==null||t.call(this),this.cleanup=void 0)}hostDisconnected(){var t;(t=this.cleanup)==null||t.call(this),this.cleanup=void 0,document.removeEventListener("sp-update-overlays",this.resetOverlayPosition)}}var lt=(e=>(e.click="click",e.hover="hover",e.longpress="longpress",e))(lt||{});const Lt=Symbol("lastInteractionType"),Ot="remove-focus-ring-safari-hack";class jt{constructor(t,{overlay:n,isPersistent:i,handleOverlayReady:s}){this.target=t,this.isLazilyOpen=!1,this.isPersistent=!1,this.isPersistent=!!i,this.handleOverlayReady=s,this.isPersistent&&this.init(),this.overlay=n}get activelyOpening(){return!1}get open(){var t,n;return(n=(t=this.overlay)==null?void 0:t.open)!=null?n:this.isLazilyOpen}set open(t){if(t!==this.open){if(this.isLazilyOpen=t,this.overlay){this.overlay.open=t,this.target[Lt]=this.type;return}t&&(customElements.whenDefined("sp-overlay").then(async()=>{const{Overlay:n}=await Pt(()=>Promise.resolve().then(()=>Fn),void 0,import.meta.url);this.overlay=new n,this.overlay.open=!0,this.target[Lt]=this.type}),Pt(()=>import("./sp-overlay-Cg7RdLQN.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]),import.meta.url))}}get overlay(){return this._overlay}set overlay(t){var n;t&&this.overlay!==t&&(this.overlay&&this.overlay.removeController(this),this._overlay=t,this.overlay.addController(this),this.initOverlay(),this.prepareDescription(this.target),(n=this.handleOverlayReady)==null||n.call(this,this.overlay))}prepareDescription(t){}releaseDescription(){}shouldCompleteOpen(){}init(){}initOverlay(){}abort(){var t;this.releaseDescription(),(t=this.abortController)==null||t.abort()}hostConnected(){this.init()}hostDisconnected(){this.isPersistent||this.abort()}}const xn=300,me={touch:"Double tap and long press for additional options",keyboard:"Press Space or Alt+Down Arrow for additional options",mouse:"Click and hold for additional options"};class Cn extends jt{constructor(){super(...arguments),this.type=lt.longpress,this.longpressState=null,this.releaseDescription=G,this.handlePointerup=()=>{var t;clearTimeout(this.timeout),this.target&&(this.longpressState=((t=this.overlay)==null?void 0:t.state)==="opening"?"pressed":null,document.removeEventListener("pointerup",this.handlePointerup),document.removeEventListener("pointercancel",this.handlePointerup))}}get activelyOpening(){return this.longpressState==="opening"||this.longpressState==="pressed"}handleLongpress(){this.open=!0,this.longpressState=this.longpressState==="potential"?"opening":"pressed"}handlePointerdown(t){!this.target||t.button!==0||(this.longpressState="potential",document.addEventListener("pointerup",this.handlePointerup),document.addEventListener("pointercancel",this.handlePointerup),"holdAffordance"in this.target)||(this.timeout=setTimeout(()=>{this.target&&this.target.dispatchEvent(new CustomEvent("longpress",{bubbles:!0,composed:!0,detail:{source:"pointer"}}))},xn))}handleKeydown(t){const{code:n,altKey:i}=t;i&&n==="ArrowDown"&&(t.stopPropagation(),t.stopImmediatePropagation())}handleKeyup(t){const{code:n,altKey:i}=t;if(n==="Space"||i&&n==="ArrowDown"){if(!this.target)return;t.stopPropagation(),this.target.dispatchEvent(new CustomEvent("longpress",{bubbles:!0,composed:!0,detail:{source:"keyboard"}})),setTimeout(()=>{this.longpressState=null})}}prepareDescription(t){if(this.releaseDescription!==G||!this.overlay.elements.length)return;const n=document.createElement("div");n.id=`longpress-describedby-descriptor-${kt()}`;const i=Ee()||xe()?"touch":"keyboard";n.textContent=me[i],n.slot="longpress-describedby-descriptor";const s=t.getRootNode(),r=this.overlay.getRootNode();s===r?this.overlay.append(n):(n.hidden=!("host"in s),t.insertAdjacentElement("afterend",n));const o=Tt(t,"aria-describedby",[n.id]);this.releaseDescription=()=>{o(),n.remove(),this.releaseDescription=G}}shouldCompleteOpen(){this.longpressState=this.longpressState==="pressed"?null:this.longpressState}init(){var t;(t=this.abortController)==null||t.abort(),this.abortController=new AbortController;const{signal:n}=this.abortController;this.target.addEventListener("longpress",()=>this.handleLongpress(),{signal:n}),this.target.addEventListener("pointerdown",i=>this.handlePointerdown(i),{signal:n}),this.prepareDescription(this.target),!this.target.holdAffordance&&(this.target.addEventListener("keydown",i=>this.handleKeydown(i),{signal:n}),this.target.addEventListener("keyup",i=>this.handleKeyup(i),{signal:n}))}}class On extends jt{constructor(){super(...arguments),this.type=lt.click,this.preventNextToggle=!1}handleClick(){this.preventNextToggle||(this.open=!this.open),this.preventNextToggle=!1}handlePointerdown(){this.preventNextToggle=this.open}init(){var t;(t=this.abortController)==null||t.abort(),this.abortController=new AbortController;const{signal:n}=this.abortController;this.target.addEventListener("click",()=>this.handleClick(),{signal:n}),this.target.addEventListener("pointerdown",()=>this.handlePointerdown(),{signal:n})}}const Pn=300;class Tn extends jt{constructor(){super(...arguments),this.type=lt.hover,this.elementIds=[],this.focusedin=!1,this.pointerentered=!1}handleKeyup(t){(t.code==="Tab"||t.code==="Escape")&&(this.open=!0,this.removeSafariFocusRingClass())}handleTargetFocusin(){if(this.target.matches(":focus-visible")){if(Yt()&&this.target[Lt]===lt.click){this.target.classList.add(Ot);return}this.open=!0,this.focusedin=!0,this.removeSafariFocusRingClass()}}handleTargetFocusout(){this.removeSafariFocusRingClass(),this.focusedin=!1,!this.pointerentered&&(this.open=!1)}handleTargetPointerenter(){var t;this.hoverTimeout&&(clearTimeout(this.hoverTimeout),this.hoverTimeout=void 0),!((t=this.overlay)!=null&&t.disabled)&&(this.open=!0,this.pointerentered=!0)}handleTargetPointerleave(){this.doPointerleave()}handleHostPointerenter(){this.hoverTimeout&&(clearTimeout(this.hoverTimeout),this.hoverTimeout=void 0)}handleHostPointerleave(){this.doPointerleave()}prepareDescription(){if(!this.overlay.elements.length)return;const t=this.target.getRootNode(),n=this.overlay.elements[0].getRootNode(),i=this.overlay.getRootNode();t===i?this.prepareOverlayRelativeDescription():t===n&&this.prepareContentRelativeDescription()}prepareOverlayRelativeDescription(){const t=Tt(this.target,"aria-describedby",[this.overlay.id]);this.releaseDescription=()=>{t(),this.releaseDescription=G}}prepareContentRelativeDescription(){const t=[],n=this.overlay.elements.map(s=>(t.push(s.id),s.id||(s.id=`${this.overlay.tagName.toLowerCase()}-helper-${kt()}`),s.id));this.elementIds=t;const i=Tt(this.target,"aria-describedby",n);this.releaseDescription=()=>{i(),this.overlay.elements.map((s,r)=>{s.id=this.elementIds[r]}),this.releaseDescription=G}}doPointerleave(){this.pointerentered=!1;const t=this.target;this.focusedin&&t.matches(":focus-visible")||(this.hoverTimeout=setTimeout(()=>{this.open=!1},Pn))}init(){var t;(t=this.abortController)==null||t.abort(),this.abortController=new AbortController;const{signal:n}=this.abortController;this.target.addEventListener("keyup",i=>this.handleKeyup(i),{signal:n}),this.target.addEventListener("focusin",()=>this.handleTargetFocusin(),{signal:n}),this.target.addEventListener("focusout",()=>this.handleTargetFocusout(),{signal:n}),this.target.addEventListener("pointerenter",()=>this.handleTargetPointerenter(),{signal:n}),this.target.addEventListener("pointerleave",()=>this.handleTargetPointerleave(),{signal:n}),this.overlay&&this.initOverlay()}initOverlay(){if(!this.abortController)return;const{signal:t}=this.abortController;this.overlay.addEventListener("pointerenter",()=>this.handleHostPointerenter(),{signal:t}),this.overlay.addEventListener("pointerleave",()=>this.handleHostPointerleave(),{signal:t})}removeSafariFocusRingClass(){Yt()&&this.target.classList.contains(Ot)&&this.target.classList.remove(Ot)}}const An={click:On,longpress:Cn,hover:Tn},Sn=we`
    :host{pointer-events:none;--swc-overlay-animation-distance:var(--spectrum-spacing-100);display:contents}:host(:has(>sp-tooltip)){--swc-overlay-animation-distance:var(--spectrum-tooltip-animation-distance)}.dialog{box-sizing:border-box;max-height:calc(100vh - 16px);max-height:calc(100dvh - 16px);max-width:calc(100vw - 16px);height:auto;--sp-overlay-open:true;background:0 0;border:0;margin:0;padding:0;display:flex;position:fixed;inset:0 auto auto 0;overflow:visible;opacity:1!important}.dialog:not([is-visible]){display:none}.dialog:focus{outline:none}dialog:modal{--mod-popover-filter:var(--spectrum-popover-filter)}:host(:not([open])) .dialog{--sp-overlay-open:false}.dialog::backdrop{display:none}.dialog:before{content:"";position:absolute;inset:-999em;pointer-events:auto!important}.dialog:not(.not-immediately-closable):before{display:none}.dialog>div{width:100%}::slotted(*){pointer-events:auto;visibility:visible!important}::slotted(sp-popover){position:static}.dialog:not([actual-placement])[placement*=top]{padding-block:var(--swc-overlay-animation-distance);margin-top:var(--swc-overlay-animation-distance)}.dialog:not([actual-placement])[placement*=right]{padding-inline:var(--swc-overlay-animation-distance);margin-left:calc(-1*var(--swc-overlay-animation-distance))}.dialog:not([actual-placement])[placement*=bottom]{padding-block:var(--swc-overlay-animation-distance);margin-top:calc(-1*var(--swc-overlay-animation-distance))}.dialog:not([actual-placement])[placement*=left]{padding-inline:var(--swc-overlay-animation-distance);margin-left:var(--swc-overlay-animation-distance)}.dialog[actual-placement*=top]{padding-block:var(--swc-overlay-animation-distance);margin-top:var(--swc-overlay-animation-distance)}.dialog[actual-placement*=right]{padding-inline:var(--swc-overlay-animation-distance);margin-left:calc(-1*var(--swc-overlay-animation-distance))}.dialog[actual-placement*=bottom]{padding-block:var(--swc-overlay-animation-distance);margin-top:calc(-1*var(--swc-overlay-animation-distance))}.dialog[actual-placement*=left]{padding-inline:var(--swc-overlay-animation-distance);margin-left:var(--swc-overlay-animation-distance)}slot[name=longpress-describedby-descriptor]{display:none}@supports selector(:open){.dialog{opacity:0}.dialog:open{opacity:1;--mod-popover-filter:var(--spectrum-popover-filter)}}@supports selector(:popover-open){.dialog{opacity:0}.dialog:popover-open{opacity:1;--mod-popover-filter:var(--spectrum-popover-filter)}}@supports (overlay:auto){.dialog{transition:all var(--mod-overlay-animation-duration,var(--spectrum-animation-duration-100,.13s)),translate 0s,display var(--mod-overlay-animation-duration,var(--spectrum-animation-duration-100,.13s));transition-behavior:allow-discrete;display:none}.dialog:popover-open,.dialog:modal{display:flex}}@supports (not selector(:open)) and (not selector(:popover-open)){:host:not([open]) .dialog{pointer-events:none}.dialog[actual-placement]{z-index:calc(var(--swc-overlay-z-index-base,1000) + var(--swc-overlay-open-count))}}
`;var Rn=Object.defineProperty,Ln=Object.getOwnPropertyDescriptor,P=(e,t,n,i)=>{for(var s=i>1?void 0:i?Ln(t,n):t,r=e.length-1,o;r>=0;r--)(o=e[r])&&(s=(i?o(t,n,s):o(s))||s);return i&&s&&Rn(t,n,s),s};const Dn="showPopover"in document.createElement("div");let ot=Le(rt);Dn?ot=ke(ot):ot=Fe(ot);const x=class Dt extends ot{constructor(){super(...arguments),this._delayed=!1,this._disabled=!1,this.offset=0,this._open=!1,this.lastRequestSlottableState=!1,this.receivesFocus="auto",this._state="closed",this.triggerElement=null,this.type="auto",this.wasOpen=!1,this.closeOnFocusOut=t=>{if(!t.relatedTarget)return;const n=new Event("overlay-relation-query",{bubbles:!0,composed:!0});t.relatedTarget.addEventListener(n.type,i=>{i.composedPath().some(s=>s===this)||(this.open=!1)}),t.relatedTarget.dispatchEvent(n)}}get delayed(){var t;return((t=this.elements.at(-1))==null?void 0:t.hasAttribute("delayed"))||this._delayed}set delayed(t){this._delayed=t}get disabled(){return this._disabled}set disabled(t){var n;this._disabled=t,t?((n=this.strategy)==null||n.abort(),this.wasOpen=this.open,this.open=!1):(this.bindEvents(),this.open=this.open||this.wasOpen,this.wasOpen=!1)}get hasNonVirtualTrigger(){return!!this.triggerElement&&!(this.triggerElement instanceof yt)}get placementController(){return this._placementController||(this._placementController=new En(this)),this._placementController}get open(){return this._open}set open(t){var n;t&&this.disabled||t!==this.open&&((n=this.strategy)!=null&&n.activelyOpening&&!t||(this._open=t,this.open&&(Dt.openCount+=1),this.requestUpdate("open",!this.open),this.open&&this.requestSlottable()))}get state(){return this._state}set state(t){var n;if(t===this.state)return;const i=this.state;this._state=t,(this.state==="opened"||this.state==="closed")&&((n=this.strategy)==null||n.shouldCompleteOpen()),this.requestUpdate("state",i)}get elementResolver(){return this._elementResolver||(this._elementResolver=new Se(this)),this._elementResolver}get usesDialog(){return this.type==="modal"||this.type==="page"}get popoverValue(){if("popover"in this)switch(this.type){case"modal":case"page":return;case"hint":return"manual";default:return this.type}}get requiresPositioning(){return!(this.type==="page"||!this.open||!this.triggerElement||!this.placement&&this.type!=="hint")}managePosition(){if(!this.requiresPositioning||!this.open)return;const t=this.offset||0,n=this.triggerElement,i=this.placement||"right",s=this.tipPadding;this.placementController.placeOverlay(this.dialogEl,{offset:t,placement:i,tipPadding:s,trigger:n,type:this.type})}async managePopoverOpen(){super.managePopoverOpen();const t=this.open;if(this.open!==t||(await this.manageDelay(t),this.open!==t)||(await this.ensureOnDOM(t),this.open!==t))return;const n=await this.makeTransition(t);this.open===t&&await this.applyFocus(t,n)}async applyFocus(t,n){if(!(this.receivesFocus==="false"||this.type==="hint")){if(await S(),await S(),t===this.open&&!this.open){this.hasNonVirtualTrigger&&this.contains(this.getRootNode().activeElement)&&this.triggerElement.focus();return}n==null||n.focus()}}returnFocus(){var t;if(this.open||this.type==="hint")return;const n=()=>{var i,s;const r=[];let o=document.activeElement;for(;(i=o==null?void 0:o.shadowRoot)!=null&&i.activeElement;)o=o.shadowRoot.activeElement;for(;o;){const a=o.assignedSlot||o.parentElement||((s=o.getRootNode())==null?void 0:s.host);a&&r.push(a),o=a}return r};this.receivesFocus!=="false"&&(t=this.triggerElement)!=null&&t.focus&&(this.contains(this.getRootNode().activeElement)||n().includes(this)||document.activeElement===document.body)&&this.triggerElement.focus()}async manageOpen(t){if(!(!this.isConnected&&this.open)&&(this.hasUpdated||await this.updateComplete,this.open?(Jt.add(this),this.willPreventClose&&(document.addEventListener("pointerup",()=>{this.dialogEl.classList.toggle("not-immediately-closable",!1),this.willPreventClose=!1},{once:!0}),this.dialogEl.classList.toggle("not-immediately-closable",!0))):(t&&this.dispose(),Jt.remove(this)),this.open&&this.state!=="opened"?this.state="opening":!this.open&&this.state!=="closed"&&(this.state="closing"),this.usesDialog?this.manageDialogOpen():this.managePopoverOpen(),this.type==="auto")){const n=this.getRootNode();this.open?n.addEventListener("focusout",this.closeOnFocusOut,{capture:!0}):n.removeEventListener("focusout",this.closeOnFocusOut,{capture:!0})}}bindEvents(){var t;(t=this.strategy)==null||t.abort(),this.strategy=void 0,this.hasNonVirtualTrigger&&this.triggerInteraction&&(this.strategy=new An[this.triggerInteraction](this.triggerElement,{overlay:this}))}handleBeforetoggle(t){t.newState!=="open"&&this.handleBrowserClose(t)}handleBrowserClose(t){var n;if(t.stopPropagation(),!((n=this.strategy)!=null&&n.activelyOpening)){this.open=!1;return}this.manuallyKeepOpen()}manuallyKeepOpen(){this.open=!0,this.placementController.allowPlacementUpdate=!0,this.manageOpen(!1)}handleSlotchange(){var t,n;this.elements.length?this.hasNonVirtualTrigger&&((n=this.strategy)==null||n.prepareDescription(this.triggerElement)):(t=this.strategy)==null||t.releaseDescription()}shouldPreventClose(){const t=this.willPreventClose;return this.willPreventClose=!1,t}requestSlottable(){this.lastRequestSlottableState!==this.open&&(this.open||document.body.offsetHeight,this.dispatchEvent(new Ce("overlay-content",this.open?{}:Oe)),this.lastRequestSlottableState=this.open)}willUpdate(t){var n;if(this.hasAttribute("id")||this.setAttribute("id",`${this.tagName.toLowerCase()}-${kt()}`),t.has("open")&&(this.hasUpdated||this.open)&&this.manageOpen(t.get("open")),t.has("trigger")){const[s,r]=((n=this.trigger)==null?void 0:n.split("@"))||[];this.elementResolver.selector=s?`#${s}`:"",this.triggerInteraction=r}let i=!1;t.has(se)&&(i=this.triggerElement,this.triggerElement=this.elementResolver.element),t.has("triggerElement")&&(i=t.get("triggerElement")),i!==!1&&this.bindEvents()}updated(t){super.updated(t),t.has("placement")&&(this.placement?this.dialogEl.setAttribute("actual-placement",this.placement):this.dialogEl.removeAttribute("actual-placement"),this.open&&typeof t.get("placement")<"u"&&this.placementController.resetOverlayPosition()),t.has("state")&&this.state==="closed"&&typeof t.get("state")<"u"&&this.placementController.clearOverlayPosition()}renderContent(){return ht`
            <slot @slotchange=${this.handleSlotchange}></slot>
        `}get dialogStyleMap(){return{"--swc-overlay-open-count":Dt.openCount.toString()}}renderDialog(){return ht`
            <dialog
                class="dialog"
                part="dialog"
                placement=${xt(this.requiresPositioning?this.placement||"right":void 0)}
                style=${Xt(this.dialogStyleMap)}
                @close=${this.handleBrowserClose}
                @cancel=${this.handleBrowserClose}
                @beforetoggle=${this.handleBeforetoggle}
                ?is-visible=${this.state!=="closed"}
            >
                ${this.renderContent()}
            </dialog>
        `}renderPopover(){return ht`
            <div
                class="dialog"
                part="dialog"
                placement=${xt(this.requiresPositioning?this.placement||"right":void 0)}
                popover=${xt(this.popoverValue)}
                style=${Xt(this.dialogStyleMap)}
                @beforetoggle=${this.handleBeforetoggle}
                @close=${this.handleBrowserClose}
                ?is-visible=${this.state!=="closed"}
            >
                ${this.renderContent()}
            </div>
        `}render(){const t=this.type==="modal"||this.type==="page";return ht`
            ${t?this.renderDialog():this.renderPopover()}
            <slot name="longpress-describedby-descriptor"></slot>
        `}connectedCallback(){super.connectedCallback(),this.addEventListener("close",()=>{this.open=!1}),this.hasUpdated&&this.bindEvents()}disconnectedCallback(){var t;(t=this.strategy)==null||t.releaseDescription(),this.open=!1,super.disconnectedCallback()}};x.styles=[Sn],x.openCount=1,P([D({type:Boolean})],x.prototype,"delayed",1),P([Kt(".dialog")],x.prototype,"dialogEl",2),P([D({type:Boolean})],x.prototype,"disabled",1),P([Pe({flatten:!0,selector:':not([slot="longpress-describedby-descriptor"], slot)'})],x.prototype,"elements",2),P([D({type:Number})],x.prototype,"offset",2),P([D({type:Boolean,reflect:!0})],x.prototype,"open",1),P([D()],x.prototype,"placement",2),P([D({attribute:"receives-focus"})],x.prototype,"receivesFocus",2),P([Kt("slot")],x.prototype,"slotEl",2),P([be()],x.prototype,"state",1),P([D({type:Number,attribute:"tip-padding"})],x.prototype,"tipPadding",2),P([D()],x.prototype,"trigger",2),P([D({attribute:!1})],x.prototype,"triggerElement",2),P([D({attribute:!1})],x.prototype,"triggerInteraction",2),P([D()],x.prototype,"type",2);let kn=x;const Fn=Object.freeze(Object.defineProperty({__proto__:null,LONGPRESS_INSTRUCTIONS:me,Overlay:kn},Symbol.toStringTag,{value:"Module"}));export{me as LONGPRESS_INSTRUCTIONS,kn as Overlay};
