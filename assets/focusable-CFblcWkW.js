const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./focus-visible-B__abHh5.js","./index-D4lIrffr.js"])))=>i.map(i=>d[i]);
import{_ as b}from"./iframe-CLyNyPU0.js";import{S as m,n as u}from"./index-CaKc-WKx.js";let d=!0;try{document.body.querySelector(":focus-visible")}catch{d=!1,b(()=>import("./focus-visible-B__abHh5.js").then(t=>t.f),__vite__mapDeps([0,1]),import.meta.url)}const f=n=>{var t,e;const a=i=>{if(i.shadowRoot==null||i.hasAttribute("data-js-focus-visible"))return()=>{};if(self.applyFocusVisiblePolyfill)self.applyFocusVisiblePolyfill(i.shadowRoot),i.manageAutoFocus&&i.manageAutoFocus();else{const h=()=>{self.applyFocusVisiblePolyfill&&i.shadowRoot&&self.applyFocusVisiblePolyfill(i.shadowRoot),i.manageAutoFocus&&i.manageAutoFocus()};return self.addEventListener("focus-visible-polyfill-ready",h,{once:!0}),()=>{self.removeEventListener("focus-visible-polyfill-ready",h)}}return()=>{}},s=Symbol("endPolyfillCoordination");class o extends(e=n,t=s,e){constructor(){super(...arguments),this[t]=null}connectedCallback(){super.connectedCallback&&super.connectedCallback(),d||requestAnimationFrame(()=>{this[s]==null&&(this[s]=a(this))})}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),d||requestAnimationFrame(()=>{this[s]!=null&&(this[s](),this[s]=null)})}}return o};var p=Object.defineProperty,x=Object.getOwnPropertyDescriptor,l=(n,t,e,a)=>{for(var s=a>1?void 0:a?x(t,e):t,o=n.length-1,i;o>=0;o--)(i=n[o])&&(s=(a?i(t,e,s):i(s))||s);return a&&s&&p(t,e,s),s};function c(){return new Promise(n=>requestAnimationFrame(()=>n()))}class r extends f(m){constructor(){super(...arguments),this.disabled=!1,this.autofocus=!1,this._tabIndex=0,this.manipulatingTabindex=!1,this.autofocusReady=Promise.resolve()}get tabIndex(){if(this.focusElement===this){const e=this.hasAttribute("tabindex")?Number(this.getAttribute("tabindex")):NaN;return isNaN(e)?-1:e}const t=parseFloat(this.hasAttribute("tabindex")&&this.getAttribute("tabindex")||"0");return this.disabled||t<0?-1:this.focusElement?this._tabIndex:t}set tabIndex(t){var e;if(this.manipulatingTabindex){this.manipulatingTabindex=!1;return}if(this.focusElement===this){if(this.disabled)this._tabIndex=t;else if(t!==this._tabIndex){this._tabIndex=t;const a=""+t;this.manipulatingTabindex=!0,this.setAttribute("tabindex",a)}return}if(t===-1?this.addEventListener("pointerdown",this.onPointerdownManagementOfTabIndex):(this.manipulatingTabindex=!0,this.removeEventListener("pointerdown",this.onPointerdownManagementOfTabIndex)),t===-1||this.disabled){if(this.manipulatingTabindex=!0,this.setAttribute("tabindex","-1"),this.removeAttribute("focusable"),this.selfManageFocusElement)return;t!==-1?(this._tabIndex=t,this.manageFocusElementTabindex(t)):(e=this.focusElement)==null||e.removeAttribute("tabindex");return}this.setAttribute("focusable",""),this.hasAttribute("tabindex")?this.removeAttribute("tabindex"):this.manipulatingTabindex=!1,this._tabIndex=t,this.manageFocusElementTabindex(t)}onPointerdownManagementOfTabIndex(){this.tabIndex===-1&&setTimeout(()=>{this.tabIndex=0,this.focus({preventScroll:!0}),this.tabIndex=-1})}async manageFocusElementTabindex(t){this.focusElement||await this.updateComplete,t===null?this.focusElement.removeAttribute("tabindex"):this.focusElement!==this&&(this.focusElement.tabIndex=t)}get focusElement(){throw new Error("Must implement focusElement getter!")}get selfManageFocusElement(){return!1}focus(t){this.disabled||!this.focusElement||(this.focusElement!==this?this.focusElement.focus(t):HTMLElement.prototype.focus.apply(this,[t]))}blur(){const t=this.focusElement||this;t!==this?t.blur():HTMLElement.prototype.blur.apply(this)}click(){if(this.disabled)return;const t=this.focusElement||this;t!==this?t.click():HTMLElement.prototype.click.apply(this)}manageAutoFocus(){this.autofocus&&(this.dispatchEvent(new KeyboardEvent("keydown",{code:"Tab"})),this.focusElement.focus())}firstUpdated(t){super.firstUpdated(t),(!this.hasAttribute("tabindex")||this.getAttribute("tabindex")!=="-1")&&this.setAttribute("focusable","")}update(t){t.has("disabled")&&this.handleDisabledChanged(this.disabled,t.get("disabled")),super.update(t)}updated(t){super.updated(t),t.has("disabled")&&this.disabled&&this.blur()}async handleDisabledChanged(t,e){const a=()=>this.focusElement!==this&&typeof this.focusElement.disabled<"u";t?(this.manipulatingTabindex=!0,this.setAttribute("tabindex","-1"),await this.updateComplete,a()?this.focusElement.disabled=!0:this.setAttribute("aria-disabled","true")):e&&(this.manipulatingTabindex=!0,this.focusElement===this?this.setAttribute("tabindex",""+this._tabIndex):this.removeAttribute("tabindex"),await this.updateComplete,a()?this.focusElement.disabled=!1:this.removeAttribute("aria-disabled"))}async getUpdateComplete(){const t=await super.getUpdateComplete();return await this.autofocusReady,t}connectedCallback(){super.connectedCallback(),this.autofocus&&(this.autofocusReady=new Promise(async t=>{await c(),await c(),t()}),this.updateComplete.then(()=>{this.manageAutoFocus()}))}}l([u({type:Boolean,reflect:!0})],r.prototype,"disabled",2),l([u({type:Boolean})],r.prototype,"autofocus",2),l([u({type:Number})],r.prototype,"tabIndex",1);export{r as F};
